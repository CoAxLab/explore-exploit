function modelfitting_Opt(subnum)
% modelfitting_Opt runs the fitting of the Opt model using mnrfit (the
% logistic regression function in MATLAB).
%
% USAGE: modelfitting_Opt(subnum)

modelnum = 1;
load(['data_extracted/extracted_sub' num2str(subnum) '.mat']);

deltaV = fun_deltaV(muvalue,daysleft);
predictor = [ones(size(actions)),deltaV];

[p_min,~,~] = mnrfit(predictor(:,2:end),2-actions); % exclude the constant term
minusloglik_min = - sum(log(1./(1+exp(-(predictor*p_min(:)))).*actions+(1-1./(1+exp(-(predictor*p_min(:))))).*(1-actions)));

fittingmethod = 'logitregress';

save(['fittingresult/' fun_modelnum2name(modelnum) '_sub' num2str(subnum) '.mat'],'p_min','minusloglik_min','fittingmethod');

end